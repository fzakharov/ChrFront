webpackJsonp([1],{115:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-toolbar",[t.authenticated?n("q-btn",{on:{click:function(e){t.$router.push("/home")}}},[n("q-icon",{attrs:{name:"home"}})],1):t._e(),t._v(" "),n("q-toolbar-title",[t._v("\n      Chronolog\n    ")]),t._v(" "),t.authenticated?t._e():n("q-btn",{on:{click:function(e){t.login()}}},[n("q-icon",{attrs:{name:"exit to app"}})],1),t._v(" "),t.authenticated?n("q-btn",{on:{click:function(e){t.logout()}}},[t._v("\n      Logout\n    ")]):t._e()],1),t._v(" "),n("div",{staticClass:"container"},[n("router-view",{attrs:{auth:t.auth,authenticated:t.authenticated}})],1)],1)},staticRenderFns:[]}},16:function(t,e,n){"use strict";var a=n(7),o=n(38),i=n(39),r=n.n(i),c=n(43),s=n.n(c),u=n(45),l=n.n(u),h=n(48),d=n.n(h);a.a.use(o.a);var p=new o.a({mode:"history",routes:[{path:"/",name:"Welcome",component:s.a},{path:"/home",name:"Home",component:r.a},{path:"/callback",name:"Callback",component:l.a},{path:"*",name:"Error404",component:d.a}]});e.a=p},33:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(7),o=n(36),i=n(4),r=n(16),c=n(52),s=n.n(c),u=n(70);n.n(u);n(34),a.a.config.productionTip=!1,a.a.use(o.a),a.a.use(i.o),a.a.component("factsfeed",s.a),n(68),i.o.start(function(){new a.a({el:"#app",router:r.a,render:function(t){return t(n(72))}})})},34:function(t,e){},37:function(t,e){},39:function(t,e,n){function a(t){n(40)}var o=n(5)(n(41),n(42),a,null,null);t.exports=o.exports},40:function(t,e){},41:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(4),o=n(7);e.default={components:{QBtn:a.a,Vue:o.a},name:"home",props:["auth","authenticated"],data:function(){return{message:"",ping:function(){var t=this;o.a.http.get("http://lvh.me:3001/api/public",{headers:{"Content-Type":"application/json"}}).then(function(e){t.message=e.body.message},function(e){t.message=e.statusText})},securedPing:function(){var t=this,e=localStorage.getItem("access_token");o.a.http.get("http://lvh.me:3001/api/private",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(function(e){t.message=e.body.message},function(e){t.message=e.statusText})}}}}},42:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.authenticated?n("h4",[t._v("\n      You are logged in!\n  ")]):t._e(),t._v(" "),t.authenticated?t._e():n("h4",[t._v("\n    You are not logged in! Please "),n("a",{on:{click:function(e){t.auth.login()}}},[t._v("Log In")]),t._v(" to continue.\n  ")]),t._v(" "),n("q-btn",{on:{click:function(e){t.ping()}}},[t._v("public")]),t._v(" "),t.authenticated?n("q-btn",{on:{click:function(e){t.securedPing()}}},[t._v("private")]):t._e(),t._v(" "),n("h5",[t._v(t._s(t.message))]),t._v(" "),n("factsfeed")],1)},staticRenderFns:[]}},43:function(t,e,n){var a=n(5)(null,n(44),null,null,null);t.exports=a.exports},44:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("h1",[t._v("Welcome")])},staticRenderFns:[]}},45:function(t,e,n){var a=n(5)(n(46),n(47),null,null,null);t.exports=a.exports},46:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(4);e.default={components:{QSpinnerMat:a.l},name:"callback",props:["auth"],data:function(){return this.auth.handleAuthentication(),{}}}},47:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-spinner-mat",{attrs:{size:"50px",color:"primary"}})],1)},staticRenderFns:[]}},48:function(t,e,n){function a(t){n(49)}var o=n(5)(n(50),n(51),a,null,null);t.exports=o.exports},49:function(t,e){},50:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(4);e.default={components:{QBtn:a.a,QIcon:a.c},data:function(){return{canGoBack:window.history.length>1}},methods:{goBack:function(){window.history.go(-1)}}}},51:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error-page window-height window-width bg-light column items-center no-wrap"},[n("div",{staticClass:"error-code bg-primary flex items-center justify-center"},[t._v("\n    404\n  ")]),t._v(" "),n("div",[n("div",{staticClass:"error-card shadow-4 bg-white column items-center justify-center no-wrap"},[n("q-icon",{attrs:{name:"error_outline",color:"grey-5"}}),t._v(" "),n("p",{staticClass:"caption text-center"},[t._v("Oops. Nothing here...")]),t._v(" "),n("p",{staticClass:"text-center group"},[t.canGoBack?n("q-btn",{attrs:{color:"primary",push:"",icon:"keyboard_arrow_left"},on:{click:t.goBack}},[t._v("\n          Go back\n        ")]):t._e(),t._v(" "),n("q-btn",{attrs:{color:"primary",push:"","icon-right":"home"},on:{click:function(e){t.$router.replace("/")}}},[t._v("\n          Go home\n        ")])],1)],1)])])},staticRenderFns:[]}},52:function(t,e,n){var a=n(5)(n(53),n(67),null,null,null);t.exports=a.exports},53:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(54),o=n(4),i=new a.a;e.default={components:{QList:o.i,QListHeader:o.j,QItem:o.d,QItemSeparator:o.f,QItemSide:o.g,QItemMain:o.e,QItemTile:o.h,QChip:o.b,QPopover:o.k},name:"factsfeed",data:function(){return{facts:[],message:""}},mounted:function(){var t=this;i.loadFacts(t)}}},54:function(t,e,n){"use strict";var a=n(17),o=n.n(a),i=n(18),r=n.n(i),c=n(7),s=function(){function t(){o()(this,t)}return r()(t,[{key:"loadFacts",value:function(t){var e=localStorage.getItem("access_token");c.a.http.get("http://lvh.me:3001/api/private",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then(function(e){t.facts=e.body.facts,t.message="ok"},function(e){t.message=e.statusText})}}]),t}();e.a=s},67:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-list",{attrs:{highlight:""}},[n("q-list-header",[t._v(t._s(t.message))]),t._v(" "),t._l(t.facts,function(e){return n("q-item",{key:e.id},[n("q-item-side",{attrs:{stamp:""}},[t._v(t._s(e.id))]),t._v(" "),n("q-item-main",[n("q-item-tile",{attrs:{label:""}},[t._v(t._s(e.title))])],1)],1)})],2)],1)},staticRenderFns:[]}},69:function(t,e){},71:function(t,e){},72:function(t,e,n){var a=n(5)(n(73),n(115),null,null,null);t.exports=a.exports},73:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(74),o=n(4),i=new a.a,r=i.login,c=i.logout,s=i.authenticated,u=i.authNotifier;e.default={components:{QToolbar:o.m,QToolbarTitle:o.n,QBtn:o.a,QIcon:o.c},name:"app",data:function(){var t=this;return u.on("authChange",function(e){t.authenticated=e.authenticated}),{auth:i,authenticated:s}},methods:{login:r,logout:c}}},74:function(t,e,n){"use strict";var a=n(75),o=n.n(a),i=n(17),r=n.n(i),c=n(18),s=n.n(c),u=n(77),l=n.n(u),h=n(114),d=n.n(h),p=n(16),f=function(){function t(){r()(this,t),this.authenticated=this.isAuthenticated(),this.authNotifier=new d.a,this.auth0=new l.a.WebAuth({domain:"chronolog.eu.auth0.com",clientID:"xHuQJZLw1YD1BVudRcJFsyVf23s5NEQE",redirectUri:window.location.origin+"/callback",audience:"https://chronolog.eu.auth0.com/api/v2/",responseType:"token id_token"}),this.login=this.login.bind(this),this.setSession=this.setSession.bind(this),this.logout=this.logout.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this)}return s()(t,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var t=this;this.auth0.parseHash(function(e,n){n&&n.accessToken&&n.idToken?(t.setSession(n),p.a.replace("home")):e&&(p.a.replace("welcome"),console.log(e))})}},{key:"setSession",value:function(t){var e=o()(1e3*t.expiresIn+(new Date).getTime());localStorage.setItem("access_token",t.accessToken),localStorage.setItem("id_token",t.idToken),localStorage.setItem("expires_at",e),this.authNotifier.emit("authChange",{authenticated:!0})}},{key:"logout",value:function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),this.userProfile=null,this.authNotifier.emit("authChange",!1),p.a.replace("home")}},{key:"isAuthenticated",value:function(){var t=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<t}}]),t}();e.a=f}},[33]);